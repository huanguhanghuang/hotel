<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="assets/css/amazeui.min.css">
    <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/jqueryui/1.9.2/themes/base/jquery-ui.css">
    <script src="assets/js/jquery.min.js"></script>
    <script  src="assets/js/amazeui.min.js"></script>
    <script src="http://apps.bdimg.com/libs/angular.js/1.4.6/angular.min.js"></script>
    <script src="http://apps.bdimg.com/libs/angular-ui-router/0.2.15/angular-ui-router.js"></script>
    <script src="http://apps.bdimg.com/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
</head>
<!--
  header········································导航条
  section#one··································表单行，两个按钮，两个搜索框
  section#two··································房态
  div#main·································房态
  div#msg·····························消息提示框
  div#bar··································侧边栏
  section#three································
 -->
<body  ng-app="myApp" ng-controller="Ctrl">
    <!-- nav start -->
        <nav>
            <ul>
              <li>道理·九次方</li>
              <li>斯纳格田园酒店</li>
              <li><a href="index.html" class="foot">退出</a></li>
              <li>用户名：<span>18683660949<span></li>
            </ul>
        </nav>
        <header class="am-topbar">
            <h1 class="am-topbar-brand" style=" margin-left:20%;margin-right:2%;">
              <a href="#" style="color:white;">酒店管理系统</a>
            </h1>
            <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only" data-am-collapse="{target: '#doc-topbar-collapse'}"></button>
            <div class=" am-topbar-collapse am-topbar-inverse" id="doc-topbar-collapse">
              <ul class="am-topbar-nav">
                      <li class="am-active"><a class="refresh">房态图</a></li>
                      <li><a href="guest.html">客人</a></li>
                      <li><a href="vip.html">会员</a></li>
                      <li><a href="company.html">协议单位</a></li>
                      <li><a href="index.html">财务</a></li>
                      <li><a href="stock.html">库存</a></li>
              </ul>
            </div>
        </header>
    <!-- end nav -->
      <section id="one">
        <form class="one_content">
    <!-- ·································外客购买 start·························· -->
          <button type="button"  class="am-btn am-btn-secondary"  data-am-modal="{target: '#doc-modal-3', closeViaDimmer: 0, width: 1100, height: 600}">外客购买</button>
          <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal-3">
              <div class="am-modal-dialog  modal_location">
                  <div class="am-modal-hd">外客购买
                      <a href="javascript: void(0)" class="am-close inits" data-am-modal-close>&times;</a>
                  </div>
                  <div class="am-modal-bd" class="oc-shop">
                      <table class="am-table am-table-bordered am-table-hover">
                          <thead>
                          <tr class="am-primary" id="oc_thead">
                              <th >商品</th>
                              <th>剩余库存</th>
                              <th>单价</th>
                              <th>购买数量</th>
                              <th>支付方式</th>
                              <th>金额</th>
                          </tr>
                          </thead>
                          <tbody id="oc_tbody">
                          <tr>
                              <td><select ng-init="Shop=shop[0]" ng-model="Shop" ng-options="x as x.name for x in shop"></select></td>
                              <td><input type="" name=""  disabled ng-model='shopNumbers'></td>
                              <td><input class="oct_price" type="" name=""  disabled ng-model='shopPrice'></td>
                              <td><input class="oct_number initial" type="number" name="" ng-model='octNumber' ng-change='change()'></td>
                              <td>
                                <select ng-init="selectedName=paymethods[0]" ng-model="selectedName" ng-options="x for x in paymethods"></select>
                              </td>
                              <td><input class="oct_totalPrice initial" type="" name="" disabled ng-value='totalPrice'></td>
                          </tr>
                          <tr class="oct_last">
                              <td><input type="" name="" disabled></td>
                              <td><input type="" name="" disabled></td>
                              <td><input type="" name="" disabled></td>
                              <td><input type="" name="" disabled></td>
                              <td><input type="" name="" disabled></td>
                              <td><input type="" name="" disabled></td>
                          </tr>
                          </tbody>
                      </table>
                      <button class="am-btn am-btn-secondary" ng-click="buy()">保存</button>
                  </div>
              </div>
          </div>
    <!-- ·································end 外客购买·························· -->
    <!-- ·································团队预订 start·························· -->
          <button
                  type="button"
                  class="am-btn am-btn-secondary"
                  data-am-modal="{target: '#doc-modal-bookgroup', closeViaDimmer: 0, width: 1100, height: 850}">团队预订</button>
          <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal-bookgroup">
              <div class="am-modal-dialog modal_location" id="bookgroup">
                  <div class="am-modal-hd">团队预订
                      <a href="javascript: void(0)" class="am-close inits" data-am-modal-close ng-click="inits()">&times;</a>
                  </div>
                  <div class="am-modal-bd">
                      <table class="am-table am-table-bordered">
                          <tr>
                            <td>到店日期：<input type="" name="" class="datepicker3 initial" readonly required></td>
                            <td>离店日期：<input type="" name="" class="datepicker4 initial" readonly required></td>
                            <td>姓名：<input type="" name="" class="initial"></td>
                          </tr>
                          <tr>
                            <td>联系方式：<input type="" name="" class="initial"></td>
                            <td>宾客数：<input type="" name="" class="initial"></td>
                            <td>房间数：<input type="text" name="" ng-model="bookgrouproom" disabled></td>
                          </tr>
                          <tr>
                            <td>备注：<textarea class="initial"></textarea>
                          </tr>
                      </table>
                      <div id="empty_states">
                      <b>请选择房间：</b>
                      <div id="main">
                      <div class="main">
                        <ul  ng-repeat='v in data' ng-show='v.state=="空房"' >
                          <li  ng-style="{background:v.color}" >
                            <dl>
                              <dd class="main_one"><b>{{v.number}}</b>&nbsp;<p>{{v.name}}房</p></dd>
                              <dd class="main_two"><span>{{v.person}}</span><p>{{v.price}}元</p></dd>
                            </dl>
                            <div class="nohide" ng-click="click_bookgroup1($event)"></div>
                            <div ng-click="click_bookgroup2($event)" class="hide initial2">
                              <span></span>
                              <span></span>
                            </div>
                          </li>
                        </ul>
                      </div>
                      </div>
                      </div>
                      <table class="am-table">
                          <tr>
                            <td><p>日期：<span>2017.04.10</span></p>
                                <p>工号：<span>003</span></p>
                                <p>营销员：<span>小张</span></p>
                            </td>
                            <td>
                              <p>定金：<input type="" name="" class="initial">元</p>
                            </td>
                          </tr>
                          <tr >
                            <td colspan="3">
                                <p class="am-form-group">
                                    <span>支付方式：</span>
                                    <label class="am-radio-inline">
                                        <input type="radio" name="docInlineRadio"  checked>储值
                                    </label>
                                    <label class="am-radio-inline">
                                        <input type="radio" name="docInlineRadio">挂账
                                    </label>
                                    <label class="am-radio-inline">
                                        <input type="radio"  value="" name="docInlineRadio" checked> 现金
                                    </label>
                                    <label class="am-radio-inline">
                                        <input type="radio" name="docInlineRadio"> 刷卡
                                    </label>
                                    <label class="am-radio-inline">
                                        <input type="radio" name="docInlineRadio"> 支付宝
                                    </label>
                                    <label class="am-radio-inline">
                                        <input type="radio" name="docInlineRadio"> 微信
                                    </label>
                                </p>
                            </td>
                          </tr>
                          <tr>
                            <td colspan="2">
                                <a class="am-btn am-btn-primary refresh "> 确定</a>
                            </td>
                          </tr>
                      </table>
                  </div>
              </div>
          </div>
    <!-- ·································end 团队预订························· -->
    <!-- ·························时间输入框······················· -->
          <input class="oc_time datepicker" type="text">
    <!-- ·························反结账 start······························ -->
          <button
                  type="button"
                  class="am-btn am-btn-primary"
                  data-am-modal="{target: '#doc-modal-checkout', closeViaDimmer: 0, width: 1100, height: 850}">
              反结账
          </button>
          <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal-checkout">
              <div class="am-modal-dialog modal_location">
                  <div class="am-modal-hd ">
                      <a href="javascript: void(0)" class="am-close inits" data-am-modal-close>&times;</a>
                  </div>
                  <div class="am-modal-bd" id="recheckout">
                      <div class="first_child">
                          <h5>反结账</h5>
                          <span>结账日期：</span><input type="" name="" class="datepicker2 initial">
                          <span>付款金额：</span><input type="" name="" class="initial">元
                          <span>单号：</span><input type="" name="" class="initial">
                          <button>搜索</button>
                      </div>
                      <table class="am-table am-table-bordered am-table-hover">
                          <thead>
                            <tr class="am-primary">
                              <td>结账单号</td>
                              <td>结账日期</td>
                              <td>结账金额</td>
                              <td>支付方式</td>
                              <td>姓名</td>
                              <td>联系方式</td>
                              <td>备注</td>
                              <td>工号</td>
                              <td></td>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                                <td>20170504121444</td>
                                <td>2017.04.02</td>
                                <td>168</td>
                                <td>支付宝</td>
                                <td>小王</td>
                                <td>18683660949</td>
                                <td></td>
                                <td>001</td>
                                <td><button class="am-btn" onClick="cancelcheckout()">反结账</button></td>
                            </tr>
                            <tr>
                                <td>20170504121444</td>
                                <td>2017.04.02</td>
                                <td>168</td>
                                <td>支付宝</td>
                                <td>小王</td>
                                <td>18683660949</td>
                                <td></td>
                                <td>001</td>
                                <td><button class="am-btn" onClick="cancelcheckout()">反结账</button></td>
                            </tr>
                            <tr>
                                <td>20170504121444</td>
                                <td>2017.04.02</td>
                                <td>168</td>
                                <td>支付宝</td>
                                <td>小王</td>
                                <td>18683660949</td>
                                <td></td>
                                <td>001</td>
                                <td><button class="am-btn" onClick="cancelcheckout()">反结账</button></td>
                            </tr>
                            <tr>
                                <td>20170504121444</td>
                                <td>2017.04.02</td>
                                <td>168</td>
                                <td>支付宝</td>
                                <td>小王</td>
                                <td>18683660949</td>
                                <td></td>
                                <td>001</td>
                                <td><button class="am-btn" onClick="cancelcheckout()">反结账</button></td>
                            </tr>
                          </tbody>
                      </table>
                  </div>
              </div>
          </div>
    <!-- ·························end 反结账······························ -->
    <!-- ·····················搜索框····························· -->
          <input class="oc_search research" type="text" name="" placeholder ="请输入会员卡号/证件号码/房号" onKeyPress="unblur()">
        </form>
      </section>
    <!-- ···································房态图································· -->
      <section id="two">
        <!-- ························主要房态图······························· -->
          <div id="main" ng-style="{height:size+'px'}">
              <div class="main">
                  <ul  ng-repeat='v in data' ng-if='v.show=="" && v.show2!=="" && v.show3==""'>
                    <li  ng-style="{background:v.color}"  ng-click='click($event)'>
                      <dl>
                        <dd class="main_one"><b>{{v.number}}</b>&nbsp;<p>{{v.name}}房</p></dd>
                        <dd class="main_two"><span>{{v.person}}</span><p>{{v.price}}元</p></dd>
                        <dd class="main_three" ng-show="v.state=='在住'"></dd>
                        <dd class="main_four">{{v.state}}</dd>
                        <dd class="main_five draggable ui-widget-content" id="draggable1" ng-show="v.state=='在住'">顾晓云</dd>
                      </dl>
                    </li>
                  </ul>
              </div>
              <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal-book">
                  <div class="am-modal-dialog  modal_location" >
                      <div class="am-modal-hd">
                          <a href="javascript: void(0)" class="am-close refresh" href="index.html">&times;</a>
                      </div>
                      <div class="am-modal-bd">
                          <section id="booked-left" class="tm_left">
                              <button  class="am-btn am-btn-secondary" ui-sref="booked" ng-click="bookLeft()">预订信息</button>
                              <button class="am-btn am-btn-secondary" ui-sref="registe" ng-click="bookLeft()">点击入住</button>
                              <button class="am-btn am-btn-secondary" id="booked-three"> 取消预订</button>
                              <a class="am-btn am-btn-secondary refresh" href="index.html">返回主页</a>
                          </section>
                          <div id="booked-right" class="tm_right" >
                          <table class="am-table am-table-bordered" id="booked" >
                              <tr><td colspan="4">预订单</td></tr>
                              <tr>
                                  <td colspan="3"><hr></td>
                              </tr>
                              <tr>
                                  <td>
                                      <label>房型：</label>
                                      <input type="text" value="普通房" name="" disabled>
                                  <td>
                                      <label>房号：</label>
                                      <input type="text" name="text" value="101" disabled>
                                  </td>
                                  <td>
                                      <label>房价：</label>
                                      <input type="text" name="text" value="168">元
                                  </td>
                              </tr>
                              <tr>
                                  <td>
                                      <label>预订人：</label>
                                      <input type="text" name="text">
                                  </td>
                                  <td>
                                      <label>电话：</label>
                                      <input type="num" name="">
                                  </td>
                                  <td>
                                      <label>客源帐号：</label>
                                      <input type="text" name="text">
                                      <button data-am-modal="{target: '#dialogboxaccount2',    closeViaDimmer: 0, width:900, height:600}">...</button>
                                      <div class="am-modal am-modal-prompt" tabindex="-1" id="dialogboxaccount2" >
                                        <div class="am-modal-dialog" id="daccount2">
                                          <div class="am-modal-hd">客源账号
                                              <a href="javascript: void(0)" class="am-close accountclose2">&times;</a>
                                          </div>
                                          <div  class="am-modal-hd">
                                              <input type="" name="" placeholder="请输入查询信息">
                                          </div>
                                          <table class="am-table am-table-bordered">
                                              <thead >
                                                  <tr class="am-primary">
                                                      <td class="t1">姓名</td>
                                                      <td class="t2">单位</td>
                                                      <td class="t3">联系方式</td>
                                                      <td>地址</td>
                                                  </tr>
                                              </thead>
                                          </table>
                                          <div class="da_body">
                                              <table class="am-table am-table-bordered  am-table-hover" >
                                                  <tbody >
                                                      <tr>
                                                          <td class="t1">小王</td>
                                                          <td class="t2">九次方科技有限公司</td>
                                                          <td class="t3">18683660949</td>
                                                          <td>四川 绵阳 涪城区 青义镇</td>
                                                      </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                          <button class="am-btn am-btn-success">确定</button>
                                        </div>
                                      </div>
                                  </td>
                              </tr>
                              <tr>
                                  <td><label >到店日期：</label>
                                      <input class="datepicker1" type="text" readonly required>
                                  </td>
                                  <td><label >离店日期：</label>
                                      <input class="datepicker2" type="text" readonly required>
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="3">
                                      <label>地址：</label>
                                      <input type="text" name="">
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="3">
                                      <label>公司：</label>
                                      <input type="text" name="">
                                  </td>
                              </tr>
                              <tr>
                                  <td>
                                      <label>备注：</label>
                                      <textarea></textarea>
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="3"  class="c_hr"><hr></td>
                              </tr>
                              <tr>
                                  <td class="c_bottom">
                                      <p>预订日期：<span>2017.04.10</span></p>
                                      <p>工号：<span>003</span></p>
                                      <p>营销员：<span>小张</span></p>
                                  </td>
                                  <td class="charge">
                                      订金：
                                      <input type="text" name="text">元
                                  </td>
                              </tr>
                              <tr>
                                  <td></td>
                                  <td colspan="2">
                                      <div class="am-form-group">
                                          <span>支付方式：</span>
                                          <label class="am-radio-inline">
                                              <input type="radio"  value="" name="docInlineRadio" checked> 现金
                                          </label>
                                          <label class="am-radio-inline">
                                              <input type="radio" name="docInlineRadio"> 刷卡
                                          </label>
                                          <label class="am-radio-inline">
                                              <input type="radio" name="docInlineRadio"> 支付宝
                                          </label>
                                          <label class="am-radio-inline">
                                              <input type="radio" name="docInlineRadio"> 微信
                                          </label>
                                          <label class="am-radio-inline">
                                              <input type="radio" name="docInlineRadio">挂账
                                          </label>
                                      </div>
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="3">
                                      <button class="am-btn am-btn-secondary booked">修改</button>
                                  </td>
                              </tr>
                          </table>
                          <script>
                              // jquery ui 的日历插件 start
                                  $('.datepicker1').datepicker({
                                      minDate: 0,
                                      onClose: function( selectedDate ) {
                                         $('.datepicker2').datepicker( "option", "minDate", selectedDate );
                                      }
                                  });
                                  $('.datepicker2').datepicker({
                                      minDate: 0,
                                      onClose: function( selectedDate ) {
                                         $('.datepicker1').datepicker( "option", "maxDate", selectedDate );
                                      }
                                  });
                              // end   jquery ui 的日历插件
                              $("button.booked").click(function(){
                                  $("#doc-modal-empty").modal('close');
                              });
                              $("a.accountclose2").click(function(){
                                  $("#dialogboxaccount2").modal('close');
                              });
                              $("#daccount2 button").click(function(){
                                  $("#dialogboxaccount2").modal('close');
                              });
                          </script>
                          </div>
                          <div class="tm_right" ui-view>
                          </div>
                          <script type="text/javascript">
                              $('#booked-three').click(function(){
                                if(confirm("确定要取消预订吗"))
                                {
                                  alert('您已取消成功！');
                                  refresh();
                                }
                              });
                          </script>
                      </div>
                  </div>
              </div><!--已预订的模态窗口-->
              <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal-getout">
                  <div class="am-modal-dialog  modal_location">
                      <div class="am-modal-hd">
                          <a class="am-close refresh"  href="index.html" style="color: #000">&times;</a>
                      </div>
                      <div class="am-modal-bd">
                          <section id="checked-left" class="tm_left">
                              <button class="am-btn am-btn-secondary" ui-sref="check-out" ng-click="bookLeft()">点击结账</button>
                              <button class="am-btn am-btn-secondary" ui-sref="exchange" ng-click="bookLeft()">点击换房</button>
                              <button class="am-btn am-btn-secondary" ui-sref="continue" ng-click="bookLeft()">点击续住</button>
                              <a class="am-btn am-btn-secondary refresh" href="index.html">返回主页</a>
                          </section>
                          <div id="checked-right" class="tm_right">
                          <div id="check-out" ng-controller="Ctrl3">
                              <div id="co_head">
                                  <table class="am-table am-table-bordered">
                                      <tr>
                                          <td  colspan="4">结账</td>
                                      </tr>
                                      <tr>
                                          <td>
                                              <label>帐号：</label>
                                              <input type="" name="">
                                          </td>
                                          <td>
                                              <label>姓名：</label>
                                              <input type="" name="">
                                          </td>
                                          <td>
                                              <label>宾客数：</label>
                                              <input type="" name="">
                                          </td>
                                      </tr>
                                      <tr>
                                          <td>
                                              <label>总房价：</label>
                                              <input type="" name="">
                                          </td>
                                          <td>
                                              <label>折扣率：</label>
                                              <input type="" name="">
                                              <button ng-click="checkoutall()">全部退房</button>
                                          </td>
                                      </tr>
                                  </table>
                              </div>
                              <div id="co_infor">
                                  <hr>
                                  <p><span>宾客帐号</span><button ng-click="checkOut()">退房</button></p>
                                  <table class="am-table am-table-bordered">
                                      <thead>
                                              <tr class="am-primary" >
                                                  <td>
                                                      <input type="checkbox" ng-model="all" ng-checked="allone" ng-disabled="allcheckout=='全退'" ng-click='allcheck()'>
                                                      <span ng-bind="all?'取消':'全选'"></span>
                                                  </td>
                                                  <td>帐号</td>
                                                  <td>房号</td>
                                                  <td>房型</td>
                                                  <td>姓名</td>
                                                  <td>房价</td>
                                                  <td>天数</td>
                                                  <td>到店日期</td>
                                              </tr>
                                          </thead>
                                  </table>
                                  <div>
                                      <table class="am-table am-table-bordered am-table-hover">
                                          <tbody>
                                              <tr ng-repeat="v in data">
                                                  <td><input type="checkbox" name="" ng-checked="all" ng-disabled="v.state=='离店'" ng-click='checkout($index)'><span>{{v.state}}</span></td>
                                                  <td>{{v.number}}</td>
                                                  <td>{{v.price}}</td>
                                                  <td>{{v.person}}</td>
                                                  <td>{{v.state}}</td>
                                                  <td>{{v.price}}</td>
                                                  <td>{{v.color}}</td>
                                                  <td>{{v.id}}</td>
                                              </tr>
                                          </tbody>
                                      </table>
                                  </div>
                              </div>
                              <div id="co_detail">
                                  <hr>
                                  <p><span>账务明细</span><button>编辑账单</button><button>打印账单</button><button>费用记账</button></p>
                                  <table class="am-table am-table-bordered">
                                      <thead>
                                          <tr class="am-primary">
                                                  <td>帐号</td>
                                                  <td>姓名</td>
                                                  <td>状态</td>
                                                  <td>房号</td>
                                                  <td>时间</td>
                                                  <td>类型</td>
                                                  <td>支付方式</td>
                                                  <td>账项</td>
                                                  <td>金额</td>
                                                  <td>工号</td>
                                                  <td>备注</td>
                                          </tr>
                                      </thead>
                                  </table>
                                  <div>
                                      <table class="am-table am-table-bordered am-table-hover">
                                          <tbody>
                                              <tr>
                                                  <td>0032</td>
                                                  <td>小王</td>
                                                  <td>在店</td>
                                                  <td>102</td>
                                                  <td>2017.4.16</td>
                                                  <td>预付</td>
                                                  <td>现金</td>
                                                  <td>房费</td>
                                                  <td>168</td>
                                                  <td>002</td>
                                                  <td></td>
                                              </tr>
                                              <tr>
                                                  <td>0032</td>
                                                  <td>小王</td>
                                                  <td>在店</td>
                                                  <td>102</td>
                                                  <td>2017.4.16</td>
                                                  <td>预付</td>
                                                  <td>现金</td>
                                                  <td>房费</td>
                                                  <td>168</td>
                                                  <td>002</td>
                                                  <td></td>
                                              </tr>
                                              <tr>
                                                  <td>0032</td>
                                                  <td>小王</td>
                                                  <td>在店</td>
                                                  <td>102</td>
                                                  <td>2017.4.16</td>
                                                  <td>预付</td>
                                                  <td>现金</td>
                                                  <td>房费</td>
                                                  <td>168</td>
                                                  <td>002</td>
                                                  <td></td>
                                              </tr>
                                              <tr>
                                                  <td>0032</td>
                                                  <td>小王</td>
                                                  <td>在店</td>
                                                  <td>102</td>
                                                  <td>2017.4.16</td>
                                                  <td>预付</td>
                                                  <td>现金</td>
                                                  <td>房费</td>
                                                  <td>168</td>
                                                  <td>002</td>
                                                  <td></td>
                                              </tr>
                                              <tr>
                                                  <td>0032</td>
                                                  <td>小王</td>
                                                  <td>在店</td>
                                                  <td>102</td>
                                                  <td>2017.4.16</td>
                                                  <td>预付</td>
                                                  <td>现金</td>
                                                  <td>房费</td>
                                                  <td>168</td>
                                                  <td>002</td>
                                                  <td></td>
                                              </tr>
                                          </tbody>
                                      </table>
                                  </div>
                                  <hr>
                              </div>
                              <div id="co_bottom">
                                  <table class="am-table am-table-bordered ">
                                      <tr>
                                          <td>
                                              <label>费用合计：</label>
                                              <input type="" name="">元
                                          </td>
                                          <td>
                                              <label>付款合计：</label>
                                              <input type="" name="">元
                                          </td>
                                          <td>
                                              <label>客帐余额：</label>
                                              <input type="" name="">元
                                          </td>
                                      </tr>
                                      <tr>
                                          <td  style="width: 40%">
                                              <label>应收：</label>
                                              <input type="" name="">元
                                          </td>
                                          <td  style="width: 30%">
                                              <label>应退：</label>
                                              <input type="" name="">元
                                          </td>
                                          <td style="width: 30%"></td>
                                      </tr>
                                      <tr><td colspan="3"><hr></td></tr>
                                      <tr>
                                          <td class="cob_bottom">
                                              <p>日期：<span>2017.04.10</span></p>
                                              <p>工号：<span>003</span></p>
                                              <p>营销员：<span>小张</span></p>
                                          </td>
                                          <td colspan="2">
                                              <div class="am-form-group">
                                                  <span>支付方式：</span>
                                                  <label class="am-radio-inline">
                                                      <input type="radio"  value="" name="docInlineRadio"  checked>储值
                                                  </label>
                                                  <label class="am-radio-inline">
                                                      <input type="radio" name="docInlineRadio">挂账
                                                  </label>
                                                  <label class="am-radio-inline">
                                                      <input type="radio"  name="docInlineRadio"> 现金
                                                  </label>
                                                  <label class="am-radio-inline">
                                                      <input type="radio" name="docInlineRadio"> 刷卡
                                                  </label>
                                                  <label class="am-radio-inline">
                                                      <input type="radio" name="docInlineRadio"> 支付宝
                                                  </label>
                                                  <label class="am-radio-inline">
                                                      <input type="radio" name="docInlineRadio"> 微信
                                                  </label>
                                              </div>
                                          </td>
                                      </tr>
                                      <tr>
                                          <td colspan="3">
                                              <button class="am-btn am-btn-secondary" data-am-modal="{target: '#dialogboxcheck-out',    closeViaDimmer: 0, width:700, height:360}">结账</button>
                                              <div class="am-modal am-modal-prompt" tabindex="-1" id="dialogboxcheck-out" >
                                                <div class="am-modal-dialog" id="dacheckout">
                                                  <div class="am-modal-hd">结账
                                                      <a href="javascript: void(0)" class="am-close">&times;</a>
                                                  </div>
                                                  <div class="am-modal-bd">
                                                      <table class="am-table am-table-bordered" >
                                                          <tr>
                                                              <td colspan="3">
                                                                  单号：<span>201604282455</span>
                                                              </td>
                                                          </tr>
                                                          <tr>
                                                              <td colspan="3"><hr></td>
                                                          </tr>
                                                          <tr>
                                                              <td>
                                                                 帐号：<span>00032</span>
                                                              </td>
                                                              <td>
                                                                 姓名：<span>小王</span>
                                                              </td>
                                                              <td>
                                                                  费用合计：<span>168</span>元
                                                              </td>
                                                          </tr>
                                                          <tr>
                                                              <td>
                                                                  付款合计：<span>100</span>元
                                                              </td>
                                                              <td>
                                                                  客帐余额：<span>0</span>元

                                                              </td>
                                                              <td>
                                                                  应收：<span>68</span>元
                                                              </td>
                                                          </tr>
                                                          <tr>
                                                              <td>
                                                                  应退：<span>0</span>元
                                                              </td>
                                                              <td>
                                                                  实收：
                                                                  <input type="" name="" value="68">元
                                                              </td>
                                                          </tr>
                                                          <tr>
                                                              <td colspan="2">
                                                                  备注：
                                                                  <textarea></textarea>
                                                              </td>
                                                          </tr>
                                                          <tr><td colspan="3"><hr></td></tr>
                                                          <tr>
                                                              <td colspan="2">
                                                                  <p>预订日期：<span>2017.04.10</span></p>
                                                                  <p>工号：<span>003</span></p>
                                                                  <p>营销员：<span>小张</span></p>
                                                              </td>
                                                              <td>
                                                                  支付方式：<span>现金</span>
                                                              </td>
                                                          </tr>
                                                      </table>
                                                  </div>
                                                  <button class="am-btn am-btn-success">确定</button>
                                                </div>
                                              </div>
                                          </td>
                                      </tr>
                                  </table>
                              </div>
                          </div>
                          <script>
                              $("#dacheckout a").click(function(){
                                  $("#dialogboxcheck-out").modal('close')
                              });
                              $("#dacheckout button").click(function(){
                                  $("#dialogboxcheck-out").modal('close')
                              });
                          </script>
                          </div>
                          <div class="tm_right" ui-view >
                          </div>
                      </div>
                  </div>
              </div><!-- 已入住房间的模态窗口-->
              <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal-empty">
                  <div class="am-modal-dialog  modal_location">
                      <div class="am-modal-hd">
                          <a class="am-close refresh" href="index.html" style="color: #000">&times;</a>
                      </div>
                      <div class="am-modal-bd">
                          <section id="book-left" class="tm_left">
                              <button class="am-btn am-btn-secondary" ui-sref="check-in" ng-click="bookLeft()">点击预定</button>
                              <button class="am-btn am-btn-secondary" ui-sref="registe" ng-click="bookLeft()">点击入住</button>
                              <a class="am-btn am-btn-secondary refresh" href="index.html">返回主页</a>
                          </section>
                          <section id="book-right" class="tm_right" >
                          <table class="am-table am-table-bordered" id="checkin" ng-controller="Ctrl2">
                              <tr><td colspan="4">预订单</td></tr>
                              <tr>
                                  <td colspan="3"><hr></td>
                              </tr>
                              <tr>
                                  <td>
                                      <label>房型：</label>
                                      <input type="text" value="普通房" name="" disabled>
                                  <td>
                                      <label>房号：</label>
                                      <input type="text" name="text" value="101" disabled>
                                  </td>
                                  <td>
                                      <label>房价：</label>
                                      <input type="text" name="text" value="168">元
                                  </td>
                              </tr>
                              <tr>
                                  <td>
                                      <label>预订人：</label>
                                      <input type="text" name="text">
                                  </td>
                                  <td>
                                      <label>电话：</label>
                                      <input type="num" name="">
                                  </td>
                                  <td>
                                      <label>客源帐号：</label>
                                      <input type="text" name="text">
                                      <button ng-click="dacount3click()">...</button>
                                      <div id="daccount" ng-if="dacount3display=='block'">
                                          <div class="dacchd"><b>客源账号</b>
                                              <a class="am-close" ng-click="dacount3close()">&times;</a>
                                          </div>
                                          <div>
                                              <input type="" name="" placeholder="请输入查询信息">
                                          </div>
                                          <table class="am-table am-table-bordered">
                                              <thead >
                                                  <tr class="am-primary">
                                                      <td class="t1">姓名</td>
                                                      <td class="t2">单位</td>
                                                      <td class="t3">联系方式</td>
                                                      <td>地址</td>
                                                  </tr>
                                              </thead>
                                          </table>
                                          <div class="da_body">
                                              <table class="am-table am-table-bordered  am-table-hover" >
                                                  <tbody >
                                                      <tr ng-repeat="v in shop">
                                                          <td class="t1">{{v.name}}</td>
                                                          <td class="t2">{{v.numbers}}</td>
                                                          <td class="t3">{{v.price}}</td>
                                                          <td>四川 绵阳 涪城区 青义镇</td>
                                                      </tr>
                                                      <tr ng-repeat="v in shop">
                                                          <td class="t1">{{v.name}}</td>
                                                          <td class="t2">{{v.numbers}}</td>
                                                          <td class="t3">{{v.price}}</td>
                                                          <td>四川 绵阳 涪城区 青义镇</td>
                                                      </tr>
                                                      <tr ng-repeat="v in shop">
                                                          <td class="t1">{{v.name}}</td>
                                                          <td class="t2">{{v.numbers}}</td>
                                                          <td class="t3">{{v.price}}</td>
                                                          <td>四川 绵阳 涪城区 青义镇</td>
                                                      </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                          <button class="am-btn am-btn-success" ng-click="dacount3close()">确定</button>
                                      </div>
                                  </td>
                              </tr>
                              <tr>
                                  <td><label >到店日期：</label>
                                      <input class="datepicker3" type="text" readonly required>
                                  </td>
                                  <td><label >离店日期：</label>
                                      <input class="datepicker4" type="text" readonly required>
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="3">
                                      <label>地址：</label>
                                      <input type="text" name="">
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="3">
                                      <label>公司：</label>
                                      <input type="text" name="">
                                  </td>
                              </tr>
                              <tr>
                                  <td>
                                      <label>备注：</label>
                                      <textarea></textarea>
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="3"  class="c_hr"><hr></td>
                              </tr>
                              <tr>
                                  <td class="c_bottom">
                                      <p>预订日期：<span>2017.04.10</span></p>
                                      <p>工号：<span>003</span></p>
                                      <p>营销员：<span>小张</span></p>
                                  </td>
                                  <td class="charge">
                                      订金：
                                      <input type="text" name="text">元
                                  </td>
                              </tr>
                                  <td></td>
                                  <td colspan="2">
                                      <div class="am-form-group">
                                          <span>支付方式：</span>
                                          <label class="am-radio-inline">
                                              <input type="radio"  value="" name="docInlineRadio" checked> 现金
                                          </label>
                                          <label class="am-radio-inline">
                                              <input type="radio" name="docInlineRadio"> 刷卡
                                          </label>
                                          <label class="am-radio-inline">
                                              <input type="radio" name="docInlineRadio"> 支付宝
                                          </label>
                                          <label class="am-radio-inline">
                                              <input type="radio" name="docInlineRadio"> 微信
                                          </label>
                                          <label class="am-radio-inline">
                                              <input type="radio" name="docInlineRadio">挂账
                                          </label>
                                      </div>
                                  </td>
                              <tr>
                                  <td colspan="3">
                                      <button class="am-btn am-btn-secondary checkin">预定</button>
                                  </td>
                              </tr>
                          </table>
                          <script>
                              // jquery ui 的日历插件 start
                                  $('.datepicker3').datepicker({
                                      minDate: 0,
                                      onClose: function( selectedDate ) {
                                         $('.datepicker4').datepicker( "option", "minDate", selectedDate );
                                      }
                                  });
                                  $('.datepicker4').datepicker({
                                      minDate: 0,
                                      onClose: function( selectedDate ) {
                                         $('.datepicker3').datepicker( "option", "maxDate", selectedDate );
                                      }
                                  });
                              // end   jquery ui 的日历插件
                                $("button.checkin").click(function(){
                                    $("#doc-modal-empty").modal('close');
                                });
                                $("a.accountclose").click(function(){
                                    $("#dialogboxaccount").modal('close');
                                });
                                $("#daccount button").click(function(){
                                    $("#dialogboxaccount").modal('close');
                                });
                          </script>
                          </section>
                          <section class="tm_right" ui-view >
                          </section>
                      </div>
                  </div>
              </div><!-- 空房的模态窗口-->
          </div>
          <!-- ···············右侧边栏··························· -->
          <div id="bar">
            <!-- ···············房态 start·················· -->
              <br>
              <label>房型 :</label>
                <select ng-init="roomShape=roomshapes[0]" ng-model="roomShape" ng-options="x as x.name for x in roomshapes"></select>
              <br>
              <label>楼层 :</label>
                <select ng-init="roomFloor=roomfloors[0]" ng-model="roomFloor" ng-options="x for x in roomfloors"></select>
              <hr>
            <!-- ···············end 房态················· -->
            <!-- ·····················房价调整 start················· -->
              <button
                      type="button"
                      class="am-btn am-btn-primary"
                      data-am-modal="{target: '#doc-modal-5', closeViaDimmer: 0, width: 1100, height: 850}">
                  房价调整
              </button>
              <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal-5">
                  <div class="am-modal-dialog modal_location">
                      <div class="am-modal-hd">房价调整
                          <a href="javascript: void(0)" class="am-close refresh">&times;</a>
                      </div>
                      <div class="am-modal-bd">
                          <div class="amb_big">
                              <div>
                                  <table class="am-table am-table-bordered">
                                      <thead id="b_thead">
                                        <tr class="am-primary">
                                            <th class="t1" ">房间类型</th>
                                            <th class="t2">基准价</th>
                                            <th class="t3">调整方式</th>
                                            <th class="t4">调整</th>
                                            <th class="t5">调整时间段</th>
                                        </tr>
                                      </thead>
                                  </table>
                              </div>
                          <div>
                          <table class="am-table am-table-bordered am-table-hover">
                              <tbody id="b_tbody">
                              <tr ng-repeat='v in roomshapes'>
                                  <td class="t1"><input type="" name="" ng-model='v.name' disabled> </td>
                                  <td class="t2"><input type="" name="" ng-model="v.price" disabled></td>
                                  <td class="t3">
                                      <select ng-init="exMethod=exmethods[0]" ng-model="exMethod" ng-options="v for v in exmethods"  ng-click="exmethod($event)">
                                      </select>
                                  </td>
                                  <td class="t4"><input type="" name="" class="initial" placeholder="请输入调整比例" ng-click="newprice($event)" onkeyup="value=value.replace(/[^\-?\d.]/g,'')"></td>
                                  <td id="bt_time"><input type="text"  placeholder="请选择开始日期" required readonly> ---- <input type="text" placeholder="请选择结束日期" required readonly></td>
                              </tr>
                              <tr class="oct_last">
                                  <td><input type="" name="" disabled></td>
                                  <td><input type="" name="" disabled></td>
                                  <td><input type="" name="" disabled></td>
                                  <td><input type="" name="" disabled></td>
                                  <td colspan="2"><input type="" name="" disabled></td>
                              </tr>
                              </tbody>
                          </table>
                          </div>
                          </div>
                          <button class="am-btn am-btn-success" ng-click='savePrice()'>保存</button>
                      </div>
                  </div>
              </div>
            <!-- ·····················end 房价调整················· -->
            <!-- ·························今日房价 start······················· -->
              <div class="todayprice">
                  <p><b>今日房价:</b></p>
                  <div ng-repeat="v in roomshapes">
                      <p ng-hide='v.name=="全部"'>{{v.name}}：{{v.price}}元</p>
                  </div>
              </div>
            <!-- ·························end 今日房价······················ -->
            <!-- ··············提示框 start······························· -->
              <div id="msg">
                <p>温馨提示</p>
                <ul>
                  <li>
                    <a href="#">17点之前需要一个吹风，请速速送到，谢谢！</a>
                    <input type="" name="" class="msgin" value="1">
                    <p><span>2017/5/5</span><span ng-click='msgi($event)'><i class="am-icon-commenting"></i></span></p>
                  </li>
                  <li>
                    <a href="#">需要一个吹风</a>
                    <p><span>2017/5/5</span><span><i class="am-icon-commenting"></i></span> </p>
                  </li>
                </ul>
                <span class="last"><a>更多 &raquo;</a></span>
              </div>
              <div class="slid">
                <p>温馨提示</p>
                <ul class="am-list">
                  <li>
                    <a href="#">每个人都有一个死角， 自己走不出来，别人也闯不进去。</a>
                    <p>房号：<span>101</span><span>2017/5/5</span></p>
                  </li>
                  <li>
                    <a href="#">我把最深沉的秘密放在那里。</a>
                    <p>房号：<span>101</span><span>2017/5/5</span></p>
                  </li>
                  <li>
                    <a href="#">你不懂我，我不怪你。</a>
                    <p>房号：<span>101</span><span>2017/5/5</span></p>
                  </li>
                  <li>
                    <a href="#">每个人都有一道伤口， 或深或浅，盖上布，以为不存在。</a>
                    <p>房号：<span>101</span><span>2017/5/5</span></p>
                  </li>
                </ul>
                <p><a>&laquo;</a></p>
              </div>
            <!-- ··············end 提示框 ······························ -->
          </div>
      </section>
    <!-- ·················不同颜色对应不同房间······································· -->
      <section id="three">
        <ul ng-repeat="v in roomdatas">
            <li ng-click="threeclick($event)" ng-style="{background:v.bgcolor}" ng-if="v.name !=='全部'" >{{v.name}}</li><span  ng-if="v.name !=='全部'">{{v.residue}}间</span>
        </ul>
      </section>
    <!-- ·································页脚································ -->
      <footer>
          <div id="left">
              <p>用户名：<span>1001<span></p>
              <span>|</span>
              <p>班次：<span>早班</span></p>
              <span>|</span>
              <a href="#" class="foot" data-am-modal="{target: '#doc-modal-shiftexchange',    closeViaDimmer: 0, width:1100, height:800}">交班</a>
              <span>|</span>
              <a href="#" class="foot">退出</a>
          </div>
          <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal-shiftexchange">
              <div class="am-modal-dialog modal_location">
                  <div class="am-modal-hd">交班报表
                      <a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close>&times;</a>
                  </div>
                  <div class="am-modal-bd shiftexchange">
                      <span  class="left">本班时间: <input type="text" name="" class="nowTime" disabled> 至 <input type="text" name="" class="nowTime" disabled></span><span>负责人：001</span>
                      <table class="am-table am-table-bordered">
                          <tr class="am-primary">
                              <td></td>
                              <td>现金</td>
                              <td>银行卡</td>
                              <td>支付宝</td>
                              <td>微信</td>
                              <td>挂账</td>
                              <td>携程</td>
                              <td>美团</td>
                              <td>网上支付</td>
                              <td>小计</td>
                          </tr>
                          <tr>
                              <td class="am-primary">交班余额</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">定金</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">押金</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">结账收款</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">结账退款</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">挂账结算</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">反结账</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>

                          <tr>
                              <td class="am-primary">外客购买</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">借出</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">收账</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                          <tr>
                              <td class="am-primary">合计</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                          </tr>
                      </table>
                      <button type="button"  class="am-btn am-btn-success"  id="doc-prompt-toggle" data-am-modal="{target: '#dialogbox',  closeViaDimmer: 0, width:500, height:300}">
                        交班
                      </button>
                      <div class="am-modal am-modal-prompt" tabindex="-1" id="dialogbox" >
                        <div class="am-modal-dialog" id="dialogbox1">
                          <div class="am-modal-hd">交班确认
                              <a href="javascript: void(0)" class="am-close" ng-click="shifclose()">&times;</a>
                          </div>
                          <div class="am-modal-bd">
                            请你仔细核对信息，确认无误后请登录您的账户：
                            <p class="zm">账号：<input type="text" class="d_username"></p>
                            <p class="zm">密码：<input type="text" class="d_password"></p>
                          </div>
                          <a id="shiftA" type="button"  class="am-btn am-btn-success" ng-click='shift()'>登录</a>
                        </div>
                      </div>
                  </div>
              </div>
          </div><!--交班报表的模态窗口-->
          <div id="right">
            <p>交谈：</p>
            <p><i class="am-icon-qq">&nbsp;</i>1815642007</p>
            <p><i class="am-icon-phone">&nbsp;</i><span>18683660949</span></p>
            <p><i class="am-icon-phone">&nbsp;</i><span>18208298026</span></p>
          </div>
      </footer>
<script>
  //输入框初始化   start
    $('.inits').click(function(){
    $('.initial').val('');
    $('#empty_states #main ul li div.initial2').addClass('hide');
    });
  //end   输入框初始化
  // 获取本地时间  start
    function current(){
      var d=new Date(),str='';
      str +=d.getFullYear()+'年';
      str +=d.getMonth()+1+'月';
      str +=d.getDate()+'日';
      str +=d.getHours()+'时';

      return str; }
      var date=new Date();
      var new_date1=date.getFullYear()+'年'+date.getMonth()+1+'月'+date.getDate()+'日'+date.getHours()+'时';
      var new_date2=date.getFullYear()+'-'+date.getMonth()+1+'-'+date.getDate();
      setInterval(function(){$(".nowTime").val(current)},50);
  //end   获取本地时间
  // jquery ui 的日历插件 start
    $(function() {
        $( ".datepicker" ).datepicker({ minDate: 0});
    });
    $(function() {
        $( ".datepicker2" ).datepicker({maxDate:0});
    });
    $('.datepicker3').datepicker({
        minDate: 0,
        onClose: function( selectedDate ) {
           $('.datepicker4').datepicker( "option", "minDate", selectedDate );
        }
    });
    $('.datepicker4').datepicker({
        minDate: 0,
        onClose: function( selectedDate ) {
           $('.datepicker3').datepicker( "option", "maxDate", selectedDate );
        }
    });
  // end   jquery ui 的日历插件
    $(document).ready(function(){
      $( "#draggable1" ).draggable({ containment: "#main", scroll: false });
    })
  // msg start
    $('#msg ul li a').click(function(){
      $(this).css("color","#333");
    });
    $('#msg span a').click(function(){
      $('#bar .slid').animate({right:"0px"});
    });

    $('#bar .slid li a').click(function(){
      $(this).css("color","#333")
    });
    $('#bar .slid p a').click(function(){
      $('#bar .slid').animate({right:"-200px"});
    });
  // end msg
  //
    function cancelcheckout(){
        var mymessage= confirm("是否确认反结账?");
        if(mymessage==true)
        {
            $('#recheckout').load('index/recheck-out.html');
        }
    };/*反结账操作*/
  // 自动检索关键词 start
    $(function() {
       var shopdatas = [
           '牙膏',
           '牙刷',
           '酒',
           '纸',
       ];
       $( ".research" ).autocomplete({
         source: shopdatas
       });
     });
  // end 自动检索关键词
  // 刷新页面     start
    $("a.refresh").click(function(){
        window.location.reload();
    });
    function refresh(){
        window.location.reload();
    };
  // end   刷新页面
  // 鼠标移上li显示 start
    $(function() {
       $('#main .main li').popover({
        theme: 'default sm',
        content: '<div style="width: 250px"><b style="padding: 0px">101</b><p style="margin: 2px 0px">普通房</p><div><p style="width: 50%;float: left;margin: 2px 0px">床位数：2</p><p style="width: 50%;float: left;margin: 2px 0px">房价：168元</p></div><div><span style="float: left;">房内设施：</span><span style="display: inline-block; background:  rgba(0,0,0,.5);margin: 2px 5px;padding:1px 5px">热水</span><span style="display: inline-block; background: rgba(0,0,0,.5);padding:1px 5px;margin: 2px 5px">空调</span><span style="display: inline-block; background: rgba(0,0,0,.5);padding:1px 5px;margin: 2px 5px">电视</span><span style="display: inline-block; background: rgba(0,0,0,.5);padding:1px 5px;margin-left: 10px">wifi</span><span style="display: inline-block; background:rgba(0,0,0,.5);padding:1px 5px;margin: 2px 5px">卫生间</span></div><div style="padding:5px 0px"><span style="float: left;">房内特征：</span ><span style="display: inline-block; background: rgba(0,0,0,.5);padding:1px 5px;margin: 2px 5px">白色调</span><span style="display: inline-block; background: rgba(0,0,0,.5);padding:1px 5px;margin: 2px 5px">朝海</span></div></div>',
        trigger: 'hover',
      })
    });
  // end    鼠标移上li显示
    var app = angular.module('myApp', ['ui.router']);
    // focus指令           start
      app.directive('autoFocus', function(){
             return function(scope, element){
               element[0].focus();
             };
       });
    // end           focus指令
    // 页面渲染完的自定义指令 start
      app.directive('onFinishRenderFilters', function ($timeout) {
          return {
              restrict: 'A',
              link: function(scope, element, attr) {
                  if (scope.$last === true) {
                      $timeout(function() {
                          scope.$emit('ngRepeatFinished');
                      });
                  }
              }
          };
      });
    // end 页面渲染完的自定义指令
    app.config(['$stateProvider','$urlRouterProvider',function($stateProvider,$urlRouterProvider){
      $stateProvider
          .state('check-out',{
              url:'/check-out',
              templateUrl:'index/check-out.html',
          })
          .state('exchange',{
              url:'/exchange',
              templateUrl:'index/exchange.html',
          })
          .state('continue',{
              url:'/continue',
              templateUrl:'index/continue.html',
          })
          .state('check-in',{
              url:'/check-in',
              templateUrl:'index/check-in.html',
          })
          .state('registe',{
              url:'/registe',
              templateUrl:'index/registe.html',
          })
          .state('booked',{
              url:'/booked',
              templateUrl:'index/booked.html',
          })
    }]);
    app.controller('Ctrl', ["$scope","$http",function($scope,$http) {
      // 模拟数据  start
        $scope.shop=[
                  {'name':'牙膏','numbers':'100','price':'12'},
                  {'name':'牙刷','numbers':'10','price':'5'},
                  {'name':'酒','numbers':'10','price':'200'},
                  {'name':'纸','numbers':'1000','price':'3'},
        ];//商品购买
        $scope.exmethods=['按比例调整','按基准价调整','按差价调整'];//房价调整的方法
        $scope.paymethods=["现金","支付宝","微信","刷卡","挂账"];// 商品购买的支付方式
        $scope.data=[
         {'id':1,'name':'普通','number':101,'price':120,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':1,'name':'贵宾','number':103,'price':228,'person':'','state':'待查','color':'#070f7a'},
         {'id':1,'name':'标间','number':104,'price': 90,'person':'','state':'自用','color':'#29e17f'},
         {'id':1,'name':'普通','number':105,'price':120,'person':'','state':'修理','color':'#a49fb1'},
         {'id':1,'name':'普通','number':106,'price':120,'person':'','state':'脏房','color':'#24282a'},
         {'id':1,'name':'商务','number':107,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':1,'name':'贵宾','number':108,'price':228,'person':'张三','state':'预订','color':'#c9d329'},
         {'id':1,'name':'标间','number':109,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'普通','number':110,'price':120,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'商务','number':111,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':1,'name':'贵宾','number':112,'price':228,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'标间','number':113,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':2,'name':'普通','number':201,'price':120,'person':'','state':'空房','color':'#2993cc'},
         {'id':2,'name':'商务','number':202,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':2,'name':'贵宾','number':203,'price':228,'person':'','state':'待查','color':'#070f7a'},
         {'id':2,'name':'标间','number':204,'price': 90,'person':'','state':'自用','color':'#29e17f'},
         {'id':2,'name':'普通','number':205,'price':120,'person':'','state':'修理','color':'#a49fb1'},
         {'id':2,'name':'普通','number':206,'price':120,'person':'','state':'脏房','color':'#24282a'},
         {'id':2,'name':'商务','number':207,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':2,'name':'贵宾','number':208,'price':228,'person':'张三','state':'预订','color':'#c9d329'},
         {'id':2,'name':'标间','number':209,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':3,'name':'普通','number':305,'price':120,'person':'','state':'修理','color':'#a49fb1'},
         {'id':3,'name':'普通','number':306,'price':120,'person':'','state':'脏房','color':'#24282a'},
         {'id':3,'name':'商务','number':307,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':3,'name':'贵宾','number':308,'price':228,'person':'张三','state':'预订','color':'#c9d329'},
         {'id':3,'name':'标间','number':309,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':3,'name':'普通','number':310,'price':120,'person':'','state':'空房','color':'#2993cc'},
         {'id':3,'name':'商务','number':311,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':3,'name':'贵宾','number':312,'price':228,'person':'','state':'空房','color':'#2993cc'},
         {'id':3,'name':'标间','number':313,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
        ];//房态显示
        $scope.roomdatas=[
                        {'name':'全部',},
                        {'name':'空房','bgcolor':'#2993cc'},
                        {'name':'预订','bgcolor':'#c9d329'},
                        {'name':'在住','bgcolor':'#d32945'},
                        {'name':'待查','bgcolor':'#070f7a'},
                        {'name':'自用','bgcolor':'#29e17f'},
                        {'name':'脏房','bgcolor':'#24282a'},
                        {'name':'修理','bgcolor':'#a49fb1'},
        ];//下边栏房态
        $scope.roomshapes=[
                        {'name':'全部'},
                        {'name':'普通','price':'120'},
                        {'name':'商务','price':'168'},
                        {'name':'贵宾','price':'228'},
                        {'name':'标间','price':'90'},
        ];//右边栏房型下拉框
        $scope.roomfloors=['全部','1','2','3'];//右边栏楼层下拉框
      // end 模拟数据
      //初始化   start
        $scope.inits=function(){
          $scope.bookgrouproom=0;
        }
      //end    初始化
      // 外客购买计算总价       start
        $scope.change=function(){
          if ($scope.octNumber<=0) {
            $scope.totalPrice=0;
            alert('请输入大于0的数字')
          } else {
            $scope.totalPrice=$('.oct_price').val()*$scope.octNumber;
          }
        };
        $scope.$watch("Shop", function(n){
              for (var i = 0; i < $scope.shop.length; i++) {
                  if (n.name==$scope.shop[i].name) {
                      $scope.shopNumbers=$scope.shop[i].numbers;
                      $scope.shopPrice=$scope.shop[i].price;
                  };
                  if (n.name=='全部'){
                      $scope.oldPrice=''
                  };
                }
          });
        $scope.buy=function(){
            if ($scope.totalPrice>0) {
              $("#doc-modal-3").modal("close");
            } else {
              alert('请输入购买数量')
            }
        }
      // end       外客购买 计算总价
      //  房态图的点击 start
        $scope.click=function($event){
          if ($($event.target).html()=='空房'){
              $($event.target).attr("data-am-modal","{target: '#doc-modal-empty', closeViaDimmer: 0, width: 1100,height: 850}");
          }
          else if($($event.target).html()=='预订'){
              if(confirm("此房已被预订，查看预订信息吗？")){
                  $($event.target).attr("data-am-modal","{target: '#doc-modal-book', closeViaDimmer: 0, width: 1100,height: 850}");
              };
          }
          else if($($event.target).html()=='在住'){
              $($event.target).attr("data-am-modal","{target: '#doc-modal-getout', closeViaDimmer: 0, width: 1100,height: 850}");
          }
          else if($($event.target).html()=='待查'){
              if(confirm("确定使用待查房吗？使用前请修改房态")){
                  $($event.target).attr("data-am-modal","{target: '#doc-modal-empty',   closeViaDimmer: 0, width: 1300,height: 850}");
              }
          }
          else if($($event.target).html()=='自用'){
              if(confirm("确定使用自用房吗？使用前请修改房态")){
                  $($event.target).attr("data-am-modal","{target: '#doc-modal-empty', closeViaDimmer: 0, width: 1100,height: 850}");
              }
          }
          else if($($event.target).html()=='脏房'){
              if(confirm("确定使用脏房吗？使用前请修改房态")){
                  $($event.target).attr("data-am-modal","{target: '#doc-modal-empty', closeViaDimmer: 0, width: 1100,height: 850}");
              }
          }
          else if($($event.target).html()=='修理'){
              if(confirm("确定使用未修理的房间吗？使用前请修改房态")){
                  $($event.target).attr("data-am-modal","{target: '#doc-modal-empty', closeViaDimmer: 0, width: 1100,height: 850}");
              }
          }
        };//主房态图点击
        $scope.bookgrouproom=0;
        $scope.click_bookgroup1=function($event){
             $($event.target).next().removeClass('hide');
             $scope.bookgrouproom+=1;
        };//团队预订房态的点击增加房间
        $scope.click_bookgroup2=function($event){
             $($event.target).addClass('hide');
             $scope.bookgrouproom--;
        };//团队预订房态的点击减少房间
        $scope.bookLeft=function(){
            $("#book-right").addClass('book-right');
            $("#checked-right").addClass('checked-right');
            $("#booked-right").addClass('booked-right');
        };//关闭模内容态框里的右边

      // end   房态图的点击
      // 选择房型 楼层  房态      start
          $scope.$watch("roomFloor", function(n){
              for (var i = 0; i < $scope.data.length; i++) {
               $scope.data[i].show=""
                  if(n=='全部'){
                    $scope.data[i].show=!$scope.data[i].show
                  };
                  if(n != $scope.data[i].id){
                     $scope.data[i].show=!$scope.data[i].show
                  }
               }
          });//选择楼层
          $scope.$watch("roomShape", function(n){
              for (var i = 0; i < $scope.data.length; i++) {
               $scope.data[i].show3="";
                  if(n.name =='全部'){
                    $scope.data[i].show3=!$scope.data[i].show3
                  }
                  if(n.name !== $scope.data[i].name){
                     $scope.data[i].show3=!$scope.data[i].show3
                  }
               }
          });//选择房型
          $scope.threeclick=function($event){
              var x = $($event.target).html();
              for (var i = 0; i < $scope.data.length; i++) {
               $scope.data[i].show2="";
                  if( x == $scope.data[i].state){
                     $scope.data[i].show2=!$scope.data[i].show2
                  }
               }
          };//下边栏房态的点击
      // end        选择房型 楼层  房态
      // 房价调整  start
        $scope.exmethod=function($event){
            var text = $($event.target).val();
            if (text == "string:按比例调整" ) {
              $($event.target).parent().next().children().attr('placeholder','请输入调整比例');
            }
            else if(text == "string:按差价调整"){
              $($event.target).parent().next().children().attr('placeholder','请输入差价');
            }
            else if(text == "string:按基准价调整"){
              $($event.target).parent().next().children().attr('placeholder','请输入基准价');
            };
        };//房价调整选择框
        $scope.newprice=function($event){
            var time1=$($event.target).parent().next().children("input:eq(0)");
            var time2=$($event.target).parent().next().children("input:eq(1)");
            time1.datepicker({
                minDate: 0,
                onClose: function( selectedDate ) {
                  time2.datepicker( "option", "minDate", selectedDate );
                }
              });
            time2.datepicker({
              onClose: function( selectedDate ) {
                time1.datepicker( "option", "maxDate", selectedDate );
              }
            });
        };//控制房价调整的时间输入
      // end   房价调整
      // msg   start
        $scope.msgi=function($event){
            $($event.target).parent().prev().addClass('msgon');
            // alert($($event.target).parent().prev().val());
        }

      // end    msg



      // 房态图下边栏计算剩余房间 start
        var count1=0;var count2=0;var count3=0;var count4=0;
        var count5=0;var count6=0;var count7=0;
        for (var i = 0; i < $scope.data.length; i++) {
          if ($scope.data[i].state=='空房') {
            count1++;
          }
          else if ($scope.data[i].state=='预订') {
            count2++;
          }
          else if ($scope.data[i].state=='在住') {
            count3++;
          }
          else if ($scope.data[i].state=='待查') {
            count4++;
          }
          else if ($scope.data[i].state=='自用') {
            count5++;
          }
          else if ($scope.data[i].state=='脏房') {
            count6++;
          }
          else if ($scope.data[i].state=='修理') {
            count7++;
          }
        };
        $scope.roomdatas[1].residue=count1;
        $scope.roomdatas[2].residue=count2;
        $scope.roomdatas[3].residue=count3;
        $scope.roomdatas[4].residue=count4;
        $scope.roomdatas[5].residue=count5;
        $scope.roomdatas[6].residue=count6;
        $scope.roomdatas[7].residue=count7;
      // end 房态图下边栏计算剩余房间
      // 交班 start
        $scope.shift=function(){
            if ($('.d_username').val()=='') {
              alert('请输入账号')
            }
            else if($('.d_password').val()==''){
              alert('请输入密码')
            }
            else{
              $('#shiftA').attr('href','index.html');
            }
        };
        $scope.shifclose=function(){
           $("#dialogbox").modal("close");
        };
      // end  交班
      // 房态图的高度  start
        $scope.size=$(document.body).height()-$('#three').height()-$('nav').height()-$('footer').height()-$('header').height()-$('#one').height()-$('#one').height();
      // end 房态图的高度
      // 点击(页面渲染完执行) start
        $scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {
        });
      // end  点击(页面渲染完执行)
    }]);
    app.controller('Ctrl2', ["$scope","$http",function($scope,$http) {
        $scope.dacountclick=function(){
          $scope.dacountdisplay='block';
        };
        $scope.dacountclose=function(){
          $scope.dacountdisplay='none';
        };


        $scope.dacount2click=function(){
          $scope.dacount2display='block';
        };
        $scope.dacount2close=function(){
          $scope.dacount2display='none';
        };

        $scope.dacount3click=function(){
          $scope.dacount3display='block';
        };
        $scope.dacount3close=function(){
          $scope.dacount3display='none';
        };
    }]);
    app.controller('Ctrl3', ["$scope","$http",function($scope,$http) {
        $scope.checkoutdata=[
         {'id':1,'name':'普通','number':101,'price':120,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':1,'name':'贵宾','number':103,'price':228,'person':'','state':'待查','color':'#070f7a'},
         {'id':1,'name':'标间','number':104,'price': 90,'person':'','state':'自用','color':'#29e17f'},
         {'id':1,'name':'普通','number':105,'price':120,'person':'','state':'修理','color':'#a49fb1'},
         {'id':1,'name':'普通','number':106,'price':120,'person':'','state':'脏房','color':'#24282a'},
         {'id':1,'name':'商务','number':107,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':1,'name':'贵宾','number':108,'price':228,'person':'张三','state':'预订','color':'#c9d329'},
         {'id':1,'name':'标间','number':109,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'普通','number':110,'price':120,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'商务','number':111,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':1,'name':'贵宾','number':112,'price':228,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'标间','number':113,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':2,'name':'普通','number':201,'price':120,'person':'','state':'空房','color':'#2993cc'},
         {'id':2,'name':'商务','number':202,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':2,'name':'贵宾','number':203,'price':228,'person':'','state':'待查','color':'#070f7a'},
         {'id':2,'name':'标间','number':204,'price': 90,'person':'','state':'自用','color':'#29e17f'},
         {'id':2,'name':'普通','number':205,'price':120,'person':'','state':'修理','color':'#a49fb1'},
         {'id':2,'name':'普通','number':206,'price':120,'person':'','state':'脏房','color':'#24282a'},
         {'id':2,'name':'商务','number':207,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':2,'name':'贵宾','number':208,'price':228,'person':'张三','state':'预订','color':'#c9d329'},
         {'id':2,'name':'标间','number':209,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':3,'name':'普通','number':305,'price':120,'person':'','state':'修理','color':'#a49fb1'},
         {'id':3,'name':'普通','number':306,'price':120,'person':'','state':'脏房','color':'#24282a'},
         {'id':3,'name':'商务','number':307,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':3,'name':'贵宾','number':308,'price':228,'person':'张三','state':'预订','color':'#c9d329'},
         {'id':3,'name':'标间','number':309,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':3,'name':'普通','number':310,'price':120,'person':'','state':'空房','color':'#2993cc'},
         {'id':3,'name':'商务','number':311,'price':168,'person':'','state':'待查','color':'#070f7a'},
         {'id':3,'name':'贵宾','number':312,'price':228,'person':'','state':'空房','color':'#2993cc'},
         {'id':3,'name':'标间','number':313,'price': 90,'person':'','state':'空房','color':'#2993cc'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
         {'id':1,'name':'商务','number':102,'price':168,'person':'张三','state':'在住','color':'#d32945'},
        ];
        $scope.checkoutall=function(){
            $scope.checkoutnumber=0;
            for (var i = 0; i < $scope.checkoutdata.length; i++) {
                if ($scope.checkoutdata[i].state=="离店") {
                  $scope.checkoutnumber++;
                };
            };
            if ($scope.checkoutnumber>=$scope.checkoutdata.length) {
              alert('您已全部退房!');
            }
            else{
              if (confirm('确定全部退房吗!')) {
                for (var i = 0; i < $scope.checkoutdata.length; i++) {
                  $scope.checkoutdata[i].state="离店";
                }
                $scope.allcheckout="全退";
              }
            };
        };//全部退房
        $scope.allcheck=function(){
          for (var i = 0; i < $scope.checkoutdata.length; i++) {
              if ($scope.checkoutdata[i].state!=='离店') {
                  if ($scope.checkoutdata[i].color=="true") {
                    $scope.checkoutdata[i].color="false";
                  }
                  else if($scope.all==false && $scope.checkoutdata[i].color=="false"){
                    $scope.checkoutdata[i].color="false";
                  }
                  else
                  {
                    $scope.checkoutdata[i].color="true";
                  };
                  if ($scope.checkoutdata[i].id=="true") {
                    $scope.checkoutdata[i].color="true";
                    $scope.checkoutdata[i].id="false";
                  };
              };
          }
        };//点击全选按钮
        $scope.checkout=function(index){
            if ($scope.checkoutdata[index].color=="true") {
              $scope.checkoutdata[index].color="false";
            }
            else
            {
              $scope.checkoutdata[index].color="true";
              $scope.checkoutdata[index].id="true";
            };
        };//点击单选按钮
        $scope.checkOut=function(){
            $scope.all=false;
            $scope.checknumber=0;
            for (var i = 0; i < $scope.checkoutdata.length; i++) {
                $scope.checkoutdata[i].id="false";
                if ($scope.checkoutdata[i].color=="true") {
                  $scope.checknumber++;
                };
                if ($scope.checkoutdata[i].color=="true") {
                  $scope.checkoutdata[i].state="离店";
                  $scope.checkoutdata[i].color="false";
                };
            };
            if ($scope.checknumber>0) {
                alert('退房成功!');
            }
            else{
                alert('请选择退房房间');
            };
            $scope.checkoutnumber=0;
            for (var i = 0; i < $scope.checkoutdata.length; i++) {
                if ($scope.checkoutdata[i].state=="离店") {
                  $scope.checkoutnumber++;
                };
            };
            if ($scope.checkoutnumber>=$scope.checkoutdata.length) {
              $scope.allcheckout="全退";
              alert('您已全部退房!');
            }
        };//退房
    }]);
</script>
</body>
</html>
